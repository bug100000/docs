**与我同行一期接口文档**

**1.所有的页面标识**

首页: index

约伴详情页: trip\_detail

发布页: trip\_publish

个人主页: personal\_home

> 我的发起: personal\_publish
>
> 我的同行: personal\_tx
>
> 我的草稿: personal\_draft
>
> 申请记录: personal\_apply

2.  **日志控制:**

    **请求的日志:(logs/api.req.log)**

> **前端**调用接口时需要在**请求header**中添加如下字段:

a.  uid: 当前用户id

b.  page: 当前页面唯一标识(如上)

c.  platform: 请求来自的平台

> **后端**获取上述header中的字段，并且
>
> 获取header中自身携带的以下字段:

a.  IP地址

b.  user\_agent用户设备

c.  method请求的方法

> 后端获取请求的当前系统时间localTime
>
> 后端生成的唯一标识

**响应的日志:(logs/api.res.log)**

> 响应的当前系统时间localTime
>
> 响应状态码
>
> 响应数据
>
> 后端生成的唯一标识(与请求对应)

**日志实例：**

a.  请求日志:

格式:
标识\|请求时间\|IP\|页面标识\|请求url\|请亲方式\|uid\|platform\|user\_agent

实例:
dee1a820-6644-11e8-b6a2-9b929de148c9\|2018-06-02T17:11:01+08:00\|192.168.43.208\|index\|/api/index\|POST\|1245\|wechat\|PostmanRuntime/7.1.5

b.  响应日志:

格式: 标识\|响应时间\|响应状态\|响应数据

实例:
33e38e70-6653-11e8-9fad-b3f25a9f6505\|2018-06-02T18:53:37+08:00\|404\|{\"code\":40004,\"msg\":\"资源不存在\"}

3.  **api接口请求**

    **请求的整体结构**

> **请求: **
>
> url: '/api/searchKey',
>
> header: 添加规定的条件,
>
> type: 'post',
>
> data: {
>
> key: val
>
> }
>
> **响应:(响应的body部分)**
>
> **http状态码为200情况下:**
>
> {
>
> code: '2000',
>
> msg: 'success',
>
> data: { // 这里存放的数据详细
>
> }
>
> }

**3.1首页**

**3.1.1**依据关键词搜索相关行程

  ---------- ----------------------------- --------------------------- ---------------------
  请求                                                                 
  Url        /v1/queryTripListByWord                                   
  Method     POST                                                      
             currentPage                   当前搜索的页数              如 "1"
             pageSize                      每页显示的条数              如 "10", 先默认为10
  Data       keyword                       搜索的词                    如 "故宫"
  响应                                                                 
  tripList   满足搜索条件的行程列表        \[ \]数组                   
  {}         publish\_user\_id             发起人id                    
             publish\_user\_wx\_name       发起人昵称                  
             publish\_user\_wx\_portriat   发起人头像地址              
             trip\_create\_time            行程创建时间 '2018-02-03'   
             trip\_end\_location           目的地 '故宫'               
             trip\_start\_time             开始时间 '2018-03-23'       
             trip\_end\_time               结束时间 '2018-03-25'       
             trip\_merber\_count           行程人数                    
             trip\_id                      行程id号                    
  ---------- ----------------------------- --------------------------- ---------------------

说明:
这里请求在发送至后台时，后台需要1.拿取传递的数据，搜索相关记录(mysql)
2.将搜索词记录在热词日志中

**3.1.2**行程分页查询(刚进入首页其实是查询第一页的内容，依据触发日期先后)

  ---------- ----------------------------- --------------------------- ---------------------
  请求                                                                 
  Url        /v1/queryTripListByWord                                   
  Method     POST                                                      
  Data       currentPage                   当前搜索的页数              如 "1"
             pageSize                      每页显示的条数              如 "10", 先默认为10
             keyword                       当前搜索词                  默认为''
  响应                                                                 
  tripList   满足搜索条件的行程列表        \[ \]数组                   
             publish\_user\_id             发布人id                    
             publish\_user\_wx\_name       发起人昵称                  
             publish\_user\_wx\_portriat   发起人头像地址              
             trip\_create\_time            行程创建时间 '2018-02-03'   
             trip\_end\_location           目的地 '故宫'               
             trip\_start\_time             开始时间 '2018-03-23'       
             trip\_end\_time               结束时间 '2018-03-25'       
             trip\_merber\_count           行程人数                    
             trip\_id                      行程id                      
  ---------- ----------------------------- --------------------------- ---------------------

说明: 当keyword为""时，后端直接从缓存中拿取相关数据即可。

**3.2约伴详情页**

**3.2.1**依据行程id查询详细信息

+-----------------+-----------------+-----------------+-----------------+
| 请求            |                 |                 |                 |
+-----------------+-----------------+-----------------+-----------------+
| Url             | /v1/queryTripDe |                 |                 |
|                 | tail            |                 |                 |
+-----------------+-----------------+-----------------+-----------------+
| Method          | POST            |                 |                 |
+-----------------+-----------------+-----------------+-----------------+
| Data            | trip\_id        | 行程id          | 如 "sdfd32424"  |
+-----------------+-----------------+-----------------+-----------------+
|                 | user\_id        | 当前用户id      |                 |
+-----------------+-----------------+-----------------+-----------------+
| 响应            |                 |                 |                 |
+-----------------+-----------------+-----------------+-----------------+
|                 | publish\_user\_ | 发起人id        |                 |
|                 | id              |                 |                 |
+-----------------+-----------------+-----------------+-----------------+
|                 | publish\_user\_ | 发起人昵称      |                 |
|                 | wx\_name        |                 |                 |
+-----------------+-----------------+-----------------+-----------------+
|                 | publish\_user\_ | 发起人头像地址  |                 |
|                 | wx\_portriat    |                 |                 |
+-----------------+-----------------+-----------------+-----------------+
|                 | trip\_create\_t | 行程创建时间    |                 |
|                 | ime             | '2018-02-03'    |                 |
+-----------------+-----------------+-----------------+-----------------+
|                 | trip\_start\_lo | 出发地          |                 |
|                 | cation          |                 |                 |
+-----------------+-----------------+-----------------+-----------------+
|                 | trip\_end\_loca | 目的地 '故宫'   |                 |
|                 | tion            |                 |                 |
+-----------------+-----------------+-----------------+-----------------+
|                 | trip\_start\_ti | 开始时间        |                 |
|                 | me              | '2018-03-23'    |                 |
+-----------------+-----------------+-----------------+-----------------+
|                 | trip\_end\_time | 结束时间        |                 |
|                 |                 | '2018-03-25'    |                 |
+-----------------+-----------------+-----------------+-----------------+
|                 | trip\_member\_c | 行程人数        |                 |
|                 | ount            |                 |                 |
+-----------------+-----------------+-----------------+-----------------+
|                 | trip\_member\_i | 同行人的信息    |                 |
|                 | nfo             | 数组            |                 |
|                 |                 |                 |                 |
|                 |                 | \[{user\_id:'', |                 |
|                 |                 | user\_wx\_portr |                 |
|                 |                 | iat:''}\]       |                 |
+-----------------+-----------------+-----------------+-----------------+
|                 | trip\_other\_de | 行程要求        |                 |
|                 | sc              |                 |                 |
+-----------------+-----------------+-----------------+-----------------+
|                 | trip\_status    | 行程状态        |                 |
+-----------------+-----------------+-----------------+-----------------+
|                 | trip\_id        | 行程id号        |                 |
+-----------------+-----------------+-----------------+-----------------+
|                 | apply\_status\_ | 当前用户对于此行程的状态 |        |
|                 | to\_add         |                 |                 |
|                 |                 |                 |                 |
|                 |                 | 0申请中 1同意   |                 |
|                 |                 | 2拒绝           |                 |
+-----------------+-----------------+-----------------+-----------------+

说明: 后端需要查询两张表: 行程基本信息表,
申请记录表(主要确定apply\_status\_to\_add字段的值)，这里两者没有先后依赖关系，建议promise.all同时查询(async/await只在存在先后依赖关系使用)

**3.2.2**申请参团

+------------------------------+-----------------+----------+----------------+
| 请求                         |                 |          |                |
+------------------------------+-----------------+----------+----------------+
| Url                          | /v1/requestJoin |          |                |
+------------------------------+-----------------+----------+----------------+
| Method                       | POST            |          |                |
+------------------------------+-----------------+----------+----------------+
| Data                         | trip\_id        | 行程id   | 如 "sdfd32424" |
+------------------------------+-----------------+----------+----------------+
|                              | user\_id        | 加入人id | 如 "sdf343"    |
+------------------------------+-----------------+----------+----------------+
|                              | publisher\_id   | 发布人id |                |
+------------------------------+-----------------+----------+----------------+
| 响应                         |                 |          |                |
+------------------------------+-----------------+----------+----------------+
| 请求成功变为"等待同意中\..." |                 |          |                |
|                              |                 |          |                |
| 这里依据code码即可判断       |                 |          |                |
+------------------------------+-----------------+----------+----------------+
|                              |                 |          |                |
+------------------------------+-----------------+----------+----------------+

说明:
后端在插入记录时需要判断是否有匹配当前信息的记录，如果存在并且为申请中\...则不插入，并返回前端"你已申请"的code(20002)

**3.2.3**获取申请列表(对于发起人)

+-----------------+-----------------+-----------------+-----------------+
| 请求            |                 |                 |                 |
+-----------------+-----------------+-----------------+-----------------+
| Url             | /v1/queryTripAp |                 |                 |
|                 | plyList         |                 |                 |
+-----------------+-----------------+-----------------+-----------------+
| Method          | POST            |                 |                 |
+-----------------+-----------------+-----------------+-----------------+
| Data            | trip\_id        | 行程id          | 如 "sdfd32424"  |
+-----------------+-----------------+-----------------+-----------------+
| 响应            |                 |                 |                 |
+-----------------+-----------------+-----------------+-----------------+
| applyList       | 满足搜索条件的行程列表 | \[ \]数组 |                |
+-----------------+-----------------+-----------------+-----------------+
| {}              | apply\_trip\_id | 申请的行程id    |                 |
+-----------------+-----------------+-----------------+-----------------+
|                 | apply\_user\_id | 申请人id        |                 |
+-----------------+-----------------+-----------------+-----------------+
|                 | apply\_user\_in | 申请人基本信息  |                 |
|                 | fo              |                 |                 |
|                 |                 | {user\_id:用户id' |               |
|                 |                 | ',user\_wx\_nam |                 |
|                 |                 | e:'昵称',user\_wx |               |
|                 |                 | \_portriat:'头像' |               |
|                 |                 | }               |                 |
+-----------------+-----------------+-----------------+-----------------+
|                 | apply\_status\_ | 申请状态        |                 |
|                 | to\_add         |                 |                 |
|                 |                 | 0申请中 1同意   |                 |
|                 |                 | 2拒绝           |                 |
+-----------------+-----------------+-----------------+-----------------+
|                 | apply\_create\_ | 申请日期        |                 |
|                 | time            |                 |                 |
|                 |                 | 2018-06-03      |                 |
|                 |                 | 12:54           |                 |
+-----------------+-----------------+-----------------+-----------------+

**3.2.3**发布人同意参团

+------------------------------+---------------+----------+----------------+
| 请求                         |               |          |                |
+------------------------------+---------------+----------+----------------+
| Url                          | /v1/agreeJoin |          |                |
+------------------------------+---------------+----------+----------------+
| Method                       | POST          |          |                |
+------------------------------+---------------+----------+----------------+
| Data                         | trip\_id      | 行程id   | 如 "sdfd32424" |
+------------------------------+---------------+----------+----------------+
|                              | user\_id      | 加入人id | 如 "sdf343"    |
+------------------------------+---------------+----------+----------------+
|                              | publisher\_id | 发布人id |                |
+------------------------------+---------------+----------+----------------+
| 响应                         |               |          |                |
+------------------------------+---------------+----------+----------------+
| 请求成功变为"等待同意中\..." |               |          |                |
|                              |               |          |                |
| 这里依据code码即可判断       |               |          |                |
+------------------------------+---------------+----------+----------------+
|                              |               |          |                |
+------------------------------+---------------+----------+----------------+

说明:
后端需要同时操作两张表，使用mysql的事务，操作行程基本信息表(添加同意的人)，与申请记录表(修改记录状态)

**3.2.4**发布人不同意参团

+------------------------------+------------------+----------+----------------+
| 请求                         |                  |          |                |
+------------------------------+------------------+----------+----------------+
| Url                          | /v1/notAgreeJoin |          |                |
+------------------------------+------------------+----------+----------------+
| Method                       | POST             |          |                |
+------------------------------+------------------+----------+----------------+
| Data                         | trip\_id         | 行程id   | 如 "sdfd32424" |
+------------------------------+------------------+----------+----------------+
|                              | user\_id         | 加入人id | 如 "sdf343"    |
+------------------------------+------------------+----------+----------------+
|                              | publisher\_id    | 发布人id |                |
+------------------------------+------------------+----------+----------------+
| 响应                         |                  |          |                |
+------------------------------+------------------+----------+----------------+
| 请求成功变为"等待同意中\..." |                  |          |                |
|                              |                  |          |                |
| 这里依据code码即可判断       |                  |          |                |
+------------------------------+------------------+----------+----------------+
|                              |                  |          |                |
+------------------------------+------------------+----------+----------------+

说明: 后端只需要操作申请记录表(修改记录状态)

**3.2.5**退出

  ---------------------------------------------------------------- --------------- ---------- ----------------
  请求                                                                                        
  Url                                                              /v1/leave                  
  Method                                                           POST                       
  Data                                                             trip\_id        行程id     如 "sdfd32424"
                                                                   user\_id        申请人id   如 "sdf343"
                                                                   publisher\_id   发布人id   
  响应                                                                                        
  请求成功，直接操作数据，如果返回成功则直接改变状态为"申请参团"                              
                                                                                              
  ---------------------------------------------------------------- --------------- ---------- ----------------

说明:
后端在插入记录时需要判断是否有匹配当前信息的记录，并且为已经退出.则不插入，并返回前端"你已退出"的code(20003);
如果可以退出，则同样需要mysql事务同时操作行程记录表与申请记录表

**3.2.6**在当前行程下评论团中其他人

+-----------------+-----------------+-----------------+-----------------+
| 请求            |                 |                 |                 |
+-----------------+-----------------+-----------------+-----------------+
| Url             | /v1/merberComme |                 |                 |
|                 | nt              |                 |                 |
+-----------------+-----------------+-----------------+-----------------+
| Method          | POST            |                 |                 |
+-----------------+-----------------+-----------------+-----------------+
| Data            | trip\_id        | 行程id          | 如 "sdfd32424"  |
+-----------------+-----------------+-----------------+-----------------+
|                 | trip\_end\_loca | 行程结束目的地  |                 |
|                 | tion            |                 |                 |
+-----------------+-----------------+-----------------+-----------------+
|                 | trip\_end\_time | 行程结束日期    |                 |
+-----------------+-----------------+-----------------+-----------------+
|                 | user\_id        | 评论人id        | 如 "sdf343"     |
+-----------------+-----------------+-----------------+-----------------+
|                 | to\_user\_id    | 被评论人id      |                 |
+-----------------+-----------------+-----------------+-----------------+
|                 | content         | 评论内容        |                 |
+-----------------+-----------------+-----------------+-----------------+
| 响应            |                 |                 |                 |
+-----------------+-----------------+-----------------+-----------------+
| 请求成功变为"等待同意中\.. |      |                 |                 |
| ."              |                 |                 |                 |
|                 |                 |                 |                 |
| 这里依据code码即可判断 |          |                 |                 |
+-----------------+-----------------+-----------------+-----------------+
|                 |                 |                 |                 |
+-----------------+-----------------+-----------------+-----------------+

**4.发布页面**

**4.1** 发布行程

  ------------------ ------------------------- ---------- ------------------
  请求                                                    
  Url                /v1/publishTrip                      
  Method             POST                                 
  Data               trip\_start\_location     出发地     
                     trip\_end\_location       目的地     
                     trip\_start\_time         开始时间   
                     trip\_end\_time           结束时间   
                     trip\_merber\_count       团队人数   包括发起者的人数
                     trip\_other\_desc         行程要求   
                     trip\_publish\_user\_id   发起人id   
  响应                                                    
  结果依据code判断                                        
                                                          
  ------------------ ------------------------- ---------- ------------------

**4.2** 编辑发布(包括我的草稿)

  ------------------ ------------------------- ---------- ------------------
  请求                                                    
  Url                /v1/saveTrip                         
  Method             POST                                 
  Data               trip\_start\_location     出发地     
                     trip\_end\_location       目的地     
                     trip\_start\_time         开始时间   
                     trip\_end\_time           结束时间   
                     trip\_merber\_count       团队人数   包括发起者的人数
                     trip\_other\_desc         行程要求   
                     trip\_publish\_user\_id   发起人id   
                     trip\_id                  行程id     
  响应                                                    
  结果依据code判断                                        
                                                          
  ------------------ ------------------------- ---------- ------------------

**5.我的发起页，我的同行页**

**5.1** 依据user\_id获取用户发起的行程记录

+-----------------+-----------------+-----------------+-----------------+
| 请求            |                 |                 |                 |
+-----------------+-----------------+-----------------+-----------------+
| Url             | /v1/queryMyPubl |                 |                 |
|                 | ish             |                 |                 |
|                 | /v1/queryMyTx   |                 |                 |
+-----------------+-----------------+-----------------+-----------------+
| Method          | POST            |                 |                 |
+-----------------+-----------------+-----------------+-----------------+
| Data            | user\_id        | 用户id          |                 |
+-----------------+-----------------+-----------------+-----------------+
|                 | currentPage     | 当前页          |                 |
+-----------------+-----------------+-----------------+-----------------+
|                 | pageSize        | 每页显示的数量  | 默认10          |
+-----------------+-----------------+-----------------+-----------------+
| 响应            |                 |                 |                 |
+-----------------+-----------------+-----------------+-----------------+
| tripList        | 列表信息        | \[\]数组        |                 |
+-----------------+-----------------+-----------------+-----------------+
|                 | user\_wx\_name  | 用户昵称 '张三' |                 |
+-----------------+-----------------+-----------------+-----------------+
|                 | user\_wx\_portr | 用户头像连接    |                 |
|                 | iat             | 'htpps://'      |                 |
+-----------------+-----------------+-----------------+-----------------+
|                 | trip\_create\_t | 行程创建时间    |                 |
|                 | ime             | '2018-02-03'    |                 |
+-----------------+-----------------+-----------------+-----------------+
|                 | trip\_end\_loca | 目的地 '故宫'   |                 |
|                 | tion            |                 |                 |
+-----------------+-----------------+-----------------+-----------------+
|                 | trip\_start\_ti | 开始时间        |                 |
|                 | me              | '2018-03-23'    |                 |
+-----------------+-----------------+-----------------+-----------------+
|                 | trip\_end\_time | 结束时间        |                 |
|                 |                 | '2018-03-25'    |                 |
+-----------------+-----------------+-----------------+-----------------+
|                 | trip\_merber\_c | 行程人数        |                 |
|                 | ount            |                 |                 |
+-----------------+-----------------+-----------------+-----------------+
|                 | trip\_id        | 行程id          |                 |
+-----------------+-----------------+-----------------+-----------------+
|                 | trip\_status    | 行程状态        |                 |
+-----------------+-----------------+-----------------+-----------------+
|                 | trip\_merber\_i | 参团人的信息    |                 |
|                 | nfo             |                 |                 |
|                 |                 | \'\[{\"user\_id |                 |
|                 |                 | \":\"1\",\"user |                 |
|                 |                 | \_wx\_portriat\ |                 |
|                 |                 | ":\"https://img |                 |
|                 |                 | s.wx.com/userid |                 |
|                 |                 | =23425\"}\]\'   |                 |
+-----------------+-----------------+-----------------+-----------------+
|                 | trip\_has\_news | 是否有新状态    |                 |
|                 |                 |                 |                 |
|                 |                 | 0 / 1           |                 |
+-----------------+-----------------+-----------------+-----------------+

说明：我的发布与我的同行都是搜索行程基本信息表(根据行程发布先后)，联表查询申请记录表来确定trip\_has\_new

**6.我的草稿**

**6.1**依据user\_id查询trip\_status = 0的记录

  ---------- ----------------------- --------------------------- --------
  请求                                                           
  Url        /v1/queryMyDraftList                                
  Method     POST                                                
  Data       user\_id                用户id                      
             currentPage             当前页                      
             pageSize                每页显示的数量              默认10
  响应                                                           
  tripList   列表信息                \[\]数组                    
             trip\_create\_time      行程创建时间 '2018-02-03'   
             trip\_start\_location   出发地                      
             trip\_end\_location     目的地 '故宫'               
             trip\_start\_time       开始时间 '2018-03-23'       
             trip\_end\_time         结束时间 '2018-03-25'       
             trip\_merber\_count     行程人数                    
  Trip       trip\_other\_desc       行程要求                    
             trip\_id                行程id                      
  ---------- ----------------------- --------------------------- --------

这里点击继续编辑跳转至发布页面，前端接受相关数据到发布页面

**7.申请记录页面(我申请)**

7.1依据user\_id查询

+-----------------+-----------------+-----------------+-----------------+
| 请求            |                 |                 |                 |
+-----------------+-----------------+-----------------+-----------------+
| Url             | /v1/queryMyRequ |                 |                 |
|                 | estList         |                 |                 |
+-----------------+-----------------+-----------------+-----------------+
| Method          | POST            |                 |                 |
+-----------------+-----------------+-----------------+-----------------+
| Data            | user\_id        | 用户id          |                 |
+-----------------+-----------------+-----------------+-----------------+
|                 | currentPage     | 当前页          |                 |
+-----------------+-----------------+-----------------+-----------------+
|                 | pageSize        | 每页显示的数量  | 默认10          |
+-----------------+-----------------+-----------------+-----------------+
| 响应            |                 |                 |                 |
+-----------------+-----------------+-----------------+-----------------+
| tripList        | 列表信息        | \[\]数组        |                 |
+-----------------+-----------------+-----------------+-----------------+
|                 | trip\_id        | 行程id          |                 |
+-----------------+-----------------+-----------------+-----------------+
|                 | trip\_start\_lo | 出发地          |                 |
|                 | cation          |                 |                 |
+-----------------+-----------------+-----------------+-----------------+
|                 | trip\_end\_loca | 目的地 '故宫'   |                 |
|                 | tion            |                 |                 |
+-----------------+-----------------+-----------------+-----------------+
|                 | trip\_start\_ti | 开始时间        |                 |
|                 | me              | '2018-03-23'    |                 |
+-----------------+-----------------+-----------------+-----------------+
|                 | trip\_end\_time | 结束时间        |                 |
|                 |                 | '2018-03-25'    |                 |
+-----------------+-----------------+-----------------+-----------------+
|                 | apply\_status\_ | 申请状态        |                 |
|                 | to\_add         |                 |                 |
+-----------------+-----------------+-----------------+-----------------+
|                 | apply\_status\_ | 对于发起人是否有新状态 |          |
|                 | to\_publisher   |                 |                 |
+-----------------+-----------------+-----------------+-----------------+
|                 | apply\_status\_ | 对于参加人是否有新状态 |          |
|                 | to\_user        |                 |                 |
+-----------------+-----------------+-----------------+-----------------+
|                 | trip\_publish\_ | 发起人的相关信息 |                |
|                 | user\_info      |                 |                 |
|                 |                 |                 |                 |
|                 |                 | \'\[{\"user\_id |                 |
|                 |                 | \":\"1\",\"user |                 |
|                 |                 | \_wx\_portriat\ |                 |
|                 |                 | ":\"https://img |                 |
|                 |                 | s.wx.com/userid |                 |
|                 |                 | =23425\"},\"use |                 |
|                 |                 | r\_wx\_name\":\ |                 |
|                 |                 | '张三\'\]\'     |                 |
+-----------------+-----------------+-----------------+-----------------+

**8.对我的评论**

+-----------------+-----------------+-----------------+-----------------+
| 请求            |                 |                 |                 |
+-----------------+-----------------+-----------------+-----------------+
| Url             | /v1/queryCommen |                 |                 |
|                 | tToMe           |                 |                 |
+-----------------+-----------------+-----------------+-----------------+
| Method          | POST            |                 |                 |
+-----------------+-----------------+-----------------+-----------------+
| Data            | user\_id        | 当前用户id      |                 |
+-----------------+-----------------+-----------------+-----------------+
|                 | currentPage     | 当前页          |                 |
+-----------------+-----------------+-----------------+-----------------+
|                 | pageSize        | 每页显示的数量  | 默认10          |
+-----------------+-----------------+-----------------+-----------------+
| 响应            |                 |                 |                 |
+-----------------+-----------------+-----------------+-----------------+
| tripList        | 列表信息        | \[\]数组        |                 |
+-----------------+-----------------+-----------------+-----------------+
|                 | trip\_comment\_ | 评论id          |                 |
|                 | id              |                 |                 |
+-----------------+-----------------+-----------------+-----------------+
|                 | trip\_comment\_ | 评论发起人信息  |                 |
|                 | from\_user\_inf |                 |                 |
|                 | o               | {user\_id:\'\', |                 |
|                 |                 | user\_wx\_name: |                 |
|                 |                 | \'\',user\_wx\_ |                 |
|                 |                 | portriat:\'\'}  |                 |
+-----------------+-----------------+-----------------+-----------------+
|                 | trip\_comment\_ | 评论内容        |                 |
|                 | content         |                 |                 |
+-----------------+-----------------+-----------------+-----------------+
|                 | trip\_comment\_ | 评论时间        |                 |
|                 | create\_time    |                 |                 |
+-----------------+-----------------+-----------------+-----------------+
|                 | trip\_end\_time | 结束时间        |                 |
|                 |                 | '2018-03-25'    |                 |
+-----------------+-----------------+-----------------+-----------------+
|                 | trip\_comment\_ | 评论对应的行程概述信息 |          |
|                 | trip\_info      |                 |                 |
|                 |                 |                 |                 |
|                 |                 | {trip\_id:\'\', |                 |
|                 |                 | trip\_end\_loca |                 |
|                 |                 | tion:\'\',trip\ |                 |
|                 |                 | _end\_time:\'\' |                 |
|                 |                 | }               |                 |
+-----------------+-----------------+-----------------+-----------------+

**9.个人主页和首页**

在进入页面后需要查询当前用户是否有新状态未处理，这里需要调用接口查询，然后在相关位置展示红点

  -------- --------------- ------------------------------ --
  请求                                                    
  Url      /v1/myNews                                     
  Method   POST                                           
  Data     user\_id        用户id                         
  响应                                                    
           trip\_apply     1/0 表示是否申请状态有新状态   
           trip\_publish   1/0 我的发布有新状态           
           trip\_comment   1/0 是否有新评论               
  -------- --------------- ------------------------------ --

后期：在首页查询一次是否有新状态，表示红点；在进入"我的"时需要查询不同模块的新状态的数量统计。
